(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{123:function(e){e.exports=JSON.parse('{"name":"client","version":"0.2.0","private":true,"homepage":"http://crowdventure.me/","dependencies":{"@azure/cognitiveservices-imagesearch":"^3.0.1","@tensorflow/tfjs":"^2.7.0","@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.3.2","@testing-library/user-event":"^7.1.2","apollo-fetch":"^0.7.0","apollo-link":"^1.2.14","apollo-link-http":"^1.5.17","apollo-upload-client":"^14.1.1","bootstrap":"^4.5.0","bootstrap-switch-button-react":"^1.2.0","bs-custom-file-input":"^1.3.4","cloudinary":"^1.22.0","cloudinary-core":"^2.11.1","cloudinary-react":"^1.6.5","color-thief-node":"^1.0.3","color-thief-react":"^1.0.2","colorthief":"^2.3.2","fs":"0.0.1-security","g-i-s":"^2.1.6","graphql":"^15.0.0","graphql-tag":"^2.11.0","graphql-tools":"^4.0.7","history":"^5.0.0","local-storage":"^2.0.0","lodash":"^4.17.19","ms-rest-azure":"^3.0.0","node-fetch":"^2.6.1","react":"^16.13.1","react-aspect-ratio":"^1.0.42","react-bootstrap":"^1.0.1","react-bootstrap-typeahead":"^5.0.0","react-cookie":"^4.0.3","react-dom":"^16.13.1","react-router-dom":"^5.1.2","react-router-redux":"^4.0.8","react-scripts":"^4.0.0","react-transition-group":"^4.4.1","request-ip":"^2.1.3","unirest":"^0.6.0","yargs-parser":"^18.1.3"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","predeploy":"npm run build","deploy":"gh-pages -d build"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"babel-eslint":"^10.1.0","eslint":"^7.14.0","eslint-config-prettier":"^6.10.1","eslint-plugin-react":"^7.21.5","gh-pages":"^3.1.0","prettier":"^2.0.4"}}')},125:function(e,t,n){"use strict";n.r(t),n.d(t,"app_fetch",(function(){return se})),n.d(t,"escape",(function(){return fe})),n.d(t,"palette",(function(){return be})),n.d(t,"query_call",(function(){return ue})),n.d(t,"mutation_call",(function(){return de}));var a,o=n(0),r=n.n(o),c=n(23),l=n.n(c),i=(n(102),n(3)),s=n(46),u=n(38),d=n(9),m=n(134),g=n(137),f=n(90),b=n(141),h=n(133),p=n(138),E=function(e){var t=e.title,n=e.pictureURL,a=e.close,c=e.loggedInAs,l=Object(o.useState)(!0),s=Object(i.a)(l,2),u=s[0],d=s[1],m=Object(o.useState)(""),g=Object(i.a)(m,2),b=g[0],h=g[1];return r.a.createElement(p.a,{show:u,onHide:function(){d(!1),a()}},r.a.createElement(p.a.Header,Object.assign({},c&&c.unsafeMode?{style:{backgroundColor:be[5]}}:{},{closeButton:!0}),r.a.createElement(p.a.Title,null,t)),r.a.createElement(p.a.Body,c&&c.unsafeMode?{style:{backgroundColor:be[4]}}:{},r.a.createElement("img",{src:n,onError:function(e){e.target.style.display="none",h(r.a.createElement("span",{style:{color:"red"}},"Picture not found!"))},style:{width:"100%",maxHeight:"70vh","object-fit":"contain"}}),b||""),r.a.createElement(p.a.Footer,c&&c.unsafeMode?{style:{backgroundColor:be[5]}}:{},r.a.createElement(f.a,{size:"sm",onClick:function(){d(!1),a()},style:{border:"1px solid ".concat(be[2]),backgroundColor:be[0]},onMouseEnter:function(e){return e.target.style.backgroundColor=be[2]},onMouseLeave:function(e){return e.target.style.backgroundColor=be[0]}},"Thanks for showing me this ",Math.random()<.5?"cool":"neat"," ","picture!")))},y=n(139),v=n(77),w=n.n(v),C=n(91),k=n(92),j=n(67),O=n(86).BING_API_KEY,x={},N={},M=0,I=[],L=function(e){var t=e.callback,n=e.loggedInAs,c=Object(o.useState)(!1),l=Object(i.a)(c,2),s=l[0],u=l[1],m=Object(o.useState)([]),g=Object(i.a)(m,2),f=g[0],p=g[1],E=function(e){return new Promise((function(t){var n=new Image;n.onload=function(){t(!0)},n.onerror=function(){t(!1)},n.src=e}))},y=function e(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t!==a?0:M;u(!0),t!==a&&(Object.keys(N).forEach((function(e){return N[e].cancelled=!0})),I=[],p([]),M=0,r=0,a=t),N[t]={query:t},fetch("https://api.cognitive.microsoft.com/bing/v7.0/images/search?q="+encodeURIComponent(t)+"&count=".concat(o,"&safeSearch=").concat(n&&n.unsafeMode?"Off":"Strict","&offset=")+r,{headers:{"Ocp-Apim-Subscription-Key":O}}).then((function(e){return e.json()})).then(function(){var a=Object(k.a)(w.a.mark((function a(r){var c,l,i,s,d,m,g;return w.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(c=r.value.length===o,l=r.value.filter((function(e){return e.isFamilyFriendly||n&&n.unsafeMode})),!N[t].cancelled){a.next=5;break}return delete N[t],a.abrupt("return");case 5:return a.next=7,Promise.all(r.value.map((function(e){return E(e.contentUrl)})));case 7:i=a.sent,l=l.filter((function(e,t){return i[t]})),s=I.filter((function(e){return"buffer"!==e.id})),d=Object(C.a)(l);try{for(d.s();!(m=d.n()).done;)g=m.value,0===s.length||2===s[s.length-1].images.length?s.push({id:"(Image Selected)",images:[g]}):s[s.length-1].images.push(g),M++}catch(f){d.e(f)}finally{d.f()}if(!N[t].cancelled){a.next=15;break}return delete N[t],a.abrupt("return");case 15:if(!c){a.next=23;break}if(!(l.length<o)){a.next=22;break}return I=s,e(t,o-l.length),a.abrupt("return");case 22:s.push({id:"buffer",images:[]});case 23:I=s,p(s),delete N[t],u(!1);case 27:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(){}))},v=function e(t){x[t]&&(x[t].currentblur-=.1,x[t].currentblur>=0&&x[t].unblurring?(x[t].component.style["-webkit-filter"]="blur("+x[t].currentblur+"px)",x[t].component.style.filter="blur("+x[t].currentblur+"px)",setTimeout((function(){return e(t)}),1)):x[t].unblurring=!1)},L=function(e){x[e]&&(x[e].unblurring=!1,S(e))},S=function e(t){x[t]&&(x[t].currentblur+=.1,x[t].currentblur<=10&&!x[t].unblurring?(x[t].component.style["-webkit-filter"]="blur("+x[t].currentblur+"px)",x[t].component.style.filter="blur("+x[t].currentblur+"px)",setTimeout((function(){return e(t)}),1)):delete x[t])};return r.a.createElement(j.a,{id:"async-example",isLoading:s,filterBy:function(){return!0},labelKey:"id",minLength:2,onSearch:y,maxResults:10,onPaginate:function(){return y(a)},useCache:!1,options:f,placeholder:"Search for an image...",renderMenuItemChildren:function(e,n,a){return r.a.createElement("div",{class:"row align-items-center"},e.images.map((function(e,n){return r.a.createElement("div",{class:"col"},r.a.createElement("img",{onClick:function(){return t(e.contentUrl,e.isFamilyFriendly)},src:e.thumbnailUrl,style:Object(d.a)({marginRight:"10px",borderRadius:"4px",width:"100%"},e.isFamilyFriendly?{}:{"-webkit-filter":"blur(10px)",filter:"blur(10px)"}),onMouseEnter:function(t){var o,r;e.isFamilyFriendly||(o=t.target,r=2*a+n,Object.keys(x).forEach((function(e){e!==r+""&&L(e)})),x[r]={component:o,currentblur:10,unblurring:!0},v(r))},onMouseLeave:function(t){e.isFamilyFriendly||L(2*a+n)}}),e.isFamilyFriendly?"":r.a.createElement(b.a,{overlay:r.a.createElement(h.a,null,"This picture will automatically flag this page as hidden!")},r.a.createElement("div",{style:{position:"absolute",top:"5px",left:"6.5px",color:"red","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none","text-shadow":"0 0 1px black"},class:"fa"},"\uf056")))})))}})},S=function(e){var t=e.title,n=e.content,a=e.onConfirm,c=e.close,l=e.loggedInAs,s=Object(o.useState)(!0),u=Object(i.a)(s,2),d=u[0],m=u[1];return r.a.createElement(p.a,{show:d,onHide:function(){m(!1),c()}},r.a.createElement(p.a.Header,Object.assign({},l&&l.unsafeMode?{style:{backgroundColor:be[5]}}:{},{closeButton:!0}),r.a.createElement(p.a.Title,null,t)),r.a.createElement(p.a.Body,l&&l.unsafeMode?{style:{backgroundColor:be[4]}}:{},n),r.a.createElement(p.a.Footer,l&&l.unsafeMode?{style:{backgroundColor:be[5]}}:{},r.a.createElement(f.a,{variant:"danger",onClick:function(){m(!1),c()}},"No!"),r.a.createElement(f.a,{variant:"primary",onClick:a,style:{border:"1px solid ".concat(be[2]),backgroundColor:be[0]},onMouseEnter:function(e){return e.target.style.backgroundColor=be[2]},onMouseLeave:function(e){return e.target.style.backgroundColor=be[0]}},"Yes!")))},A=function(e){var t=e.node,n=e.close,a=e.loggedInAs,c=Object(o.useState)(!0),l=Object(i.a)(c,2),s=l[0],u=l[1],m=Object(o.useState)(""),g=Object(i.a)(m,2),b=g[0],h=g[1],E=Object(o.useState)(void 0),v=Object(i.a)(E,2),w=v[0],C=v[1],k=Object(o.useState)(t.title),j=Object(i.a)(k,2),O=j[0],x=j[1],N=Object(o.useState)(t.content),M=Object(i.a)(N,2),I=M[0],A=M[1],P=Object(o.useState)(t.pictureURL),U=Object(i.a)(P,2),D=U[0],R=U[1],T=Object(o.useState)(!1),B=Object(i.a)(T,2),H=B[0],F=B[1],z=Object(o.useState)(t.hidden),Y=Object(i.a)(z,2),q=Y[0],V=Y[1],W=Object(o.useState)(t.pictureUnsafe||!1),G=Object(i.a)(W,2),_=G[0],K=G[1],J=function(){de("deleteNode",{nodeID:t.ID},0,(function(){history.back(),setTimeout((function(){return window.location.reload(!1)}),100)}))};return r.a.createElement(p.a,{show:s,onHide:function(){u(!1),n()}},r.a.createElement(p.a.Header,Object.assign({},a&&a.unsafeMode?{style:{backgroundColor:be[5]}}:{},{closeButton:!0}),r.a.createElement(p.a.Title,null,"Editing Page")),r.a.createElement(y.a,null,r.a.createElement(p.a.Body,a&&a.unsafeMode?{style:{backgroundColor:be[4]}}:{},D?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{border:"1px solid #eee",borderRadius:"8px"}},r.a.createElement("img",{src:D,onError:function(e){h(r.a.createElement("span",{style:{color:"red"}},"Picture not found!")),R(""),K(!1)},style:{padding:"1px",width:"100%","object-fit":"contain",borderRadius:"8px"}}),r.a.createElement("span",{class:"fa fa-times",style:{position:"absolute",top:"1.5em",right:"1.5em",color:"#888",cursor:"pointer",textShadow:"-1px 0 2px white, 0 1px 2px white, 1px 0 2px white, 0 -1px 2px white"},onMouseEnter:function(e){return e.target.style.color="#555"},onMouseLeave:function(e){return e.target.style.color="#888"},onClick:function(){R(""),K(!1)}})),r.a.createElement("br",null)):"",r.a.createElement("div",{class:"row no-gutters"},r.a.createElement("div",{class:"col"},"Picture:"),r.a.createElement("div",{class:"col small text-muted text-center"},D?D===t.pictureURL?"(Use existing picture)":"(Use new picture)":"(Don't use any picture)"),r.a.createElement("div",{class:"col text-right"},r.a.createElement(f.a,{variant:a&&a.unsafeMode?"secondary":"light",size:"sm",onClick:function(){return F(!H)}},D?"Change":"Select"," Picture"))),H?r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement(L,{loggedInAs:a,callback:function(e,t){R(e),h(""),F(!1),K(!t)}})):"",r.a.createElement("hr",a&&a.unsafeMode?{style:{backgroundColor:"rgb(225, 240, 255)"}}:{}),r.a.createElement(y.a.Label,null,"Title:"),r.a.createElement(y.a.Control,Object.assign({},a&&a.unsafeMode?{style:{backgroundColor:be[5],color:"white"}}:{},{value:O,onChange:function(e){return x(e.target.value)}})),r.a.createElement(y.a.Label,null,"Content:"),r.a.createElement(y.a.Control,Object.assign({},a&&a.unsafeMode?{style:{backgroundColor:be[5],color:"white"}}:{},{as:"textarea",rows:"3",value:I,onChange:function(e){return A(e.target.value)}})),a&&a.isAdmin?r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a.Label,null,"Admin Controls:"),r.a.createElement(y.a.Check,{type:"checkbox",checked:q||!1,onChange:function(e){return V(e.target.checked)},label:"Page should be hidden",id:"hide"})):"",b||"",_?r.a.createElement("span",{style:{color:"red"}},r.a.createElement("br",null),"The image chosen will cause the page to automatically be hidden. If you would like to not have this happen, change or remove the image."):""),r.a.createElement(p.a.Footer,a&&a.unsafeMode?{style:{backgroundColor:be[5]}}:{},r.a.createElement(f.a,{onClick:function(){return O?I?function(){var e=fe(O),n=fe(I,!0),a=D.length>0?fe(D):null;de("editNode",Object(d.a)(Object(d.a)({nodeID:t.ID,title:e,content:'""'.concat(n,'""'),pictureURL:a},_?{hidden:!0,pictureUnsafe:!0}:{pictureUnsafe:!1}),_||void 0===q||t.pictureUnsafe?{}:{hidden:q}),{ID:0},(function(e){e&&window.location.reload(!1)}))}():h(r.a.createElement("span",{style:{color:"red"}},"Content cannot be empty!")):h(r.a.createElement("span",{style:{color:"red"}},"Title cannot be empty!"))},style:{border:"1px solid ".concat(be[2]),backgroundColor:be[0]},onMouseEnter:function(e){return e.target.style.backgroundColor=be[2]},onMouseLeave:function(e){return e.target.style.backgroundColor=be[0]}},"Edit Page!"),r.a.createElement(f.a,{variant:"danger",onClick:function(){C(r.a.createElement(S,{loggedInAs:a,close:function(){return C(void 0)},onConfirm:J,title:"Delete Page",content:"This will erase all suggested choices of this page, and their associated scores. This will NOT delete sub-pages of this page. Are you sure you wish to continue?"}))}},"Delete"))),w||"")},P=function(e){var t=e.callback,n=e.toID,a=Object(o.useState)(void 0),c=Object(i.a)(a,2),l=c[0],s=c[1],u=Object(o.useState)(void 0),d=Object(i.a)(u,2),m=d[0],g=d[1];return Object(o.useEffect)((function(){n?ue("getNode",{ID:n},{title:0,ID:0},(function(e){return g(e)})):g(null),ue("allNodes",{},{title:0,owner:{screenName:0,profilePicURL:0},ID:0},(function(e){return s(e)}))}),[]),l&&void 0!==m?r.a.createElement(j.b,{filterBy:function(e,n){return""===n.text?(t(""),!0):e.title.toLowerCase().includes(n.text.toLowerCase())||e.owner.screenName.toLowerCase().includes(n.text.toLowerCase())},defaultSelected:[m?m.title:""],labelKey:"title",options:l,placeholder:"(Leave Empty to Create New Page)",renderMenuItemChildren:function(e){return r.a.createElement("div",{onClick:function(){return t(e.ID)}},e.title,r.a.createElement("div",null,r.a.createElement("small",null,"Author:"," ",r.a.createElement("img",{src:e.owner.profilePicURL?e.owner.profilePicURL:"/crowdventure/defaultProfilePic.jpg",onError:function(e){e.target.src="/crowdventure/defaultProfilePic.jpg"},style:{border:"1px solid #bbb",height:"2em",width:"2em","object-fit":"cover","border-radius":"50%"}})," ",e.owner.screenName)))}}):r.a.createElement("div",null,"Loading...")},U=function(e){var t=e.loggedInAs,n=e.callback,a=e.picture,c=e.pictureUnsafe,l=e.close,s=e.featured,u=Object(o.useState)(""),m=Object(i.a)(u,2),g=m[0],b=m[1],h=Object(o.useState)(""),E=Object(i.a)(h,2),v=E[0],w=E[1],C=Object(o.useState)(a),k=Object(i.a)(C,2),j=k[0],O=k[1],x=Object(o.useState)(!1),N=Object(i.a)(x,2),M=N[0],I=N[1],S=Object(o.useState)(!0),A=Object(i.a)(S,2),P=A[0],U=A[1],D=Object(o.useState)(""),R=Object(i.a)(D,2),T=R[0],B=R[1],H=Object(o.useState)(c),F=Object(i.a)(H,2),z=F[0],Y=F[1];return r.a.createElement(p.a,{show:P,onHide:function(){U(!1),l()}},r.a.createElement(p.a.Header,Object.assign({},t&&t.unsafeMode?{style:{backgroundColor:be[5]}}:{},{closeButton:!0}),r.a.createElement(p.a.Title,null,"Creating New Page")),r.a.createElement(y.a,null,r.a.createElement(p.a.Body,t&&t.unsafeMode?{style:{backgroundColor:be[4]}}:{},j?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{border:"1px solid #eee",borderRadius:"8px"}},r.a.createElement("img",{src:j,onError:function(){B(r.a.createElement("span",{style:{color:"red"}},"Picture not found!")),O(""),Y(!1)},alt:"This shouldn't have happened",style:{padding:"1px",width:"100%","object-fit":"contain",borderRadius:"8px"}}),r.a.createElement("span",{class:"fa fa-times",style:{position:"absolute",top:"1.5em",right:"1.5em",color:"#888",cursor:"pointer",textShadow:"-1px 0 2px white, 0 1px 2px white, 1px 0 2px white, 0 -1px 2px white"},onMouseEnter:function(e){return e.target.style.color="#555"},onMouseLeave:function(e){return e.target.style.color="#888"},onClick:function(){O(""),Y(!1)}})),r.a.createElement("br",null)):"",r.a.createElement("div",{class:"row no-gutters"},r.a.createElement("div",{class:"col"},"Picture:"),r.a.createElement("div",{class:"col small text-muted text-center"},j?"(Use new picture)":"(Don't use any picture)"),r.a.createElement("div",{class:"col text-right"},r.a.createElement(f.a,{variant:t&&t.unsafeMode?"secondary":"light",size:"sm",onClick:function(){return I(!M)}},j?"Change":"Select"," Picture"))),M?r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement(L,{loggedInAs:t,callback:function(e,t){O(e),I(!1),Y(!t)}})):"",r.a.createElement("hr",t&&t.unsafeMode?{style:{backgroundColor:"rgb(225, 240, 255)"}}:{}),r.a.createElement(y.a.Label,null,"Title:"),r.a.createElement(y.a.Control,Object.assign({value:g,onChange:function(e){return b(e.target.value)}},t&&t.unsafeMode?{style:{backgroundColor:be[5],color:"white"}}:{})),r.a.createElement(y.a.Label,null,"Content:"),r.a.createElement(y.a.Control,Object.assign({as:"textarea",rows:"3",value:v},t&&t.unsafeMode?{style:{backgroundColor:be[5],color:"white"}}:{},{onChange:function(e){return w(e.target.value)}})),T||"",z?r.a.createElement("span",{style:{color:"red"}},"The image chosen will cause the page to automatically be hidden. If you would like to not have this happen, change or remove the image."):""),r.a.createElement(p.a.Footer,t&&t.unsafeMode?{style:{backgroundColor:be[5]}}:{},r.a.createElement(f.a,{onClick:function(){return g?v?function(){var e=fe(g),a=fe(v,!0),o=fe(j);de("createNode",Object(d.a)(Object(d.a)({accountScreenName:t.screenName,title:e,content:'""'.concat(a,'""'),featured:s||!1},z?{hidden:!0,pictureUnsafe:!0}:{}),o&&o.length?{pictureURL:o}:{}),{ID:0},n||function(){window.location.reload(!1)})}():B(r.a.createElement("span",{style:{color:"red"}},"Content cannot be empty!")):B(r.a.createElement("span",{style:{color:"red"}},"Title cannot be empty!"))},style:{border:"1px solid ".concat(be[2]),backgroundColor:be[0]},onMouseEnter:function(e){return e.target.style.backgroundColor=be[2]},onMouseLeave:function(e){return e.target.style.backgroundColor=be[0]}},"Create Page!"))))},D=function(e){var t=e.loggedInAs,n=e.fromNode,a=e.close,c=Object(o.useState)(!0),l=Object(i.a)(c,2),s=l[0],u=l[1],d=Object(o.useState)(""),m=Object(i.a)(d,2),g=m[0],b=m[1],h=Object(o.useState)(""),E=Object(i.a)(h,2),v=E[0],w=E[1],C=Object(o.useState)(""),k=Object(i.a)(C,2),j=k[0],O=k[1],x=Object(o.useState)(""),N=Object(i.a)(x,2),M=N[0],I=N[1],L=function e(a){if(a){var o=fe(j);de("suggestChoice",{accountScreenName:t.screenName,fromID:n.ID,action:o,toID:a},{ID:0},(function(){window.location.reload(!1)}))}else I(r.a.createElement(U,{loggedInAs:t,picture:n.pictureURL,pictureUnsafe:n.pictureUnsafe,callback:function(t){return e(t.ID)},close:function(){return I(void 0)}}))};return r.a.createElement(p.a,{show:s,onHide:function(){u(!1),a()}},r.a.createElement(p.a.Header,Object.assign({},t&&t.unsafeMode?{style:{backgroundColor:be[5]}}:{},{closeButton:!0}),r.a.createElement(p.a.Title,null,"Suggesting New Choice")),r.a.createElement(y.a,null,r.a.createElement(p.a.Body,t&&t.unsafeMode?{style:{backgroundColor:be[4]}}:{},r.a.createElement(y.a.Label,null,"Action:"),r.a.createElement(y.a.Control,Object.assign({},t&&t.unsafeMode?{style:{backgroundColor:be[5],color:"white"}}:{},{value:j,onChange:function(e){return O(e.target.value)}})),r.a.createElement(y.a.Label,null,"Go to Page:"),r.a.createElement(P,{callback:function(e){return w(e)},toID:v}),g||""),r.a.createElement(p.a.Footer,t&&t.unsafeMode?{style:{backgroundColor:be[5]}}:{},r.a.createElement(f.a,{onClick:function(){return j?L(v):b(r.a.createElement("span",{style:{color:"red"}},"Action cannot be empty!"))},style:{border:"1px solid ".concat(be[2]),backgroundColor:be[0]},onMouseEnter:function(e){return e.target.style.backgroundColor=be[2]},onMouseLeave:function(e){return e.target.style.backgroundColor=be[0]}},"Submit New Choice"))),M||"")},R=n(40),T=n(135),B=n(142),H=n(136),F=n(71),z=function(e){var t=e.choice,n=e.loggedInAs,a=e.fromNode,c=e.close,l=Object(o.useState)(!0),s=Object(i.a)(l,2),u=s[0],m=s[1],g=Object(o.useState)(""),b=Object(i.a)(g,2),h=b[0],E=b[1],v=Object(o.useState)(t.to.ID),w=Object(i.a)(v,2),C=w[0],k=w[1],j=Object(o.useState)(t.action),O=Object(i.a)(j,2),x=O[0],N=O[1],M=Object(o.useState)(""),I=Object(i.a)(M,2),L=I[0],S=I[1],A=Object(o.useState)(t.hidden),D=Object(i.a)(A,2),R=D[0],T=D[1],B=function e(o){if(o){var c=fe(x);de("editSuggestion",Object(d.a)({choiceID:t.ID,action:c,toID:o},void 0!==R?{hidden:R}:{}),{ID:0},(function(){window.location.reload(!1)}))}else S(r.a.createElement(U,{loggedInAs:n,picture:a.pictureURL,callback:function(t){return e(t.ID)},close:function(){return S(void 0)}}))};return r.a.createElement(p.a,{show:u,onHide:function(){m(!1),c()}},r.a.createElement(p.a.Header,Object.assign({},n&&n.unsafeMode?{style:{backgroundColor:be[5]}}:{},{closeButton:!0}),r.a.createElement(p.a.Title,null,"Editing Choice")),r.a.createElement(y.a,null,r.a.createElement(p.a.Body,n&&n.unsafeMode?{style:{backgroundColor:be[4]}}:{},r.a.createElement(y.a.Label,null,"Action:"),r.a.createElement(y.a.Control,Object.assign({},n&&n.unsafeMode?{style:{backgroundColor:be[5],color:"white"}}:{},{value:x,onChange:function(e){return N(e.target.value)}})),r.a.createElement(y.a.Label,null,"Go to Page:"),r.a.createElement(P,{callback:function(e){return k(e)},toID:C}),n&&n.isAdmin?r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a.Label,null,"Admin Controls:"),r.a.createElement(y.a.Check,{type:"checkbox",checked:R||!1,onChange:function(e){return T(e.target.checked)},label:"Choice should be hidden",id:"hide"})):"",h||""),r.a.createElement(p.a.Footer,n&&n.unsafeMode?{style:{backgroundColor:be[5]}}:{},r.a.createElement(f.a,{onClick:function(){return x?B(C):E(r.a.createElement("span",{style:{color:"red"}},"Action cannot be empty!"))},style:{border:"1px solid ".concat(be[2]),backgroundColor:be[0]},onMouseEnter:function(e){return e.target.style.backgroundColor=be[2]},onMouseLeave:function(e){return e.target.style.backgroundColor=be[0]}},"Edit Choice"))),L||"")},Y=function(e){var t=e.node,n=e.loggedInAs,a=e.canon,c=Object(o.useState)((a?t.canonChoices:t.nonCanonChoices).map((function(){return null}))),l=Object(i.a)(c,2),s=l[0],u=l[1],g=[],f=Object(o.useState)(void 0),p=Object(i.a)(f,2),E=p[0],y=p[1];return Object(o.useEffect)((function(){(s.length!==(a?t.canonChoices:t.nonCanonChoices).length||s.some((function(e,n){return null!==e&&e.ID!==(a?t.canonChoices:t.nonCanonChoices)[n].ID})))&&u((a?t.canonChoices:t.nonCanonChoices).map((function(){return null}))),s.some((function(e){return null===e}))&&(a?t.canonChoices:t.nonCanonChoices).forEach((function(e,t){null===s[t]&&ue("getChoice",{ID:e.ID},{ID:0,action:0,likedBy:{screenName:0},dislikedBy:{screenName:0},score:0,suggestedBy:{hidden:0,screenName:0,profilePicURL:0},hidden:0,to:{owner:{screenName:0,hidden:0},ID:0,hidden:0},from:{ID:0}},(function(e){e.liked=n&&e.likedBy.some((function(e){return e.screenName===n.screenName})),e.disliked=n&&e.dislikedBy.some((function(e){return e.screenName===n.screenName})),s[t]=e,y({})}))}))})),s?s.length>0?r.a.createElement(T.a,null,s.map((function(e,c){if(g.push(Object(o.createRef)()),null===e)return r.a.createElement(B.a,{className:"mt-2 text-center",style:Object(d.a)({boxShadow:"0 0 3px ".concat(be[0]),overflow:"hidden"},n&&n.unsafeMode?{backgroundColor:be[4]}:{}),ref:g[c]},r.a.createElement(B.a.Body,{style:{paddingTop:"2em"}},r.a.createElement(B.a.Title,null,"Loading...")));if((e.hidden||e.suggestedBy.hidden)&&(!n||!n.unsafeMode&&n.screenName!==e.suggestedBy.screenName&&(n.screenName!==t.owner.screenName||!a)))return r.a.createElement("span",null);var l=!e.to||(e.to.hidden||e.to.owner.hidden)&&(!n||!n.unsafeMode&&e.to.owner.screenName!==n.screenName);return r.a.createElement(B.a,{className:"text-center mt-2",style:Object(d.a)({boxShadow:"0 0 3px ".concat(be[0]),overflow:"hidden"},n&&n.unsafeMode?{backgroundColor:be[4]}:{}),ref:g[c]},r.a.createElement("a",{href:l?"":"/crowdventure/#/node/".concat(e.to.ID),onClick:function(){return window.scrollTo({top:0,left:0,behavior:"smooth"})},style:{pointerEvents:l?"none":"auto",color:l?"grey":n&&n.unsafeMode?be[0]:be[2]},onMouseEnter:function(e){g[c].current.style.boxShadow="0 0 6px ".concat(be[2])},onMouseLeave:function(e){g[c].current.style.boxShadow="0 0 3px ".concat(be[0])}},r.a.createElement(B.a.Body,{style:{cursor:"pointer",paddingTop:"2em"}},r.a.createElement(B.a.Title,null,e.action))),e.hidden||e.suggestedBy.hidden?r.a.createElement(b.a,{overlay:r.a.createElement(h.a,null,"This action is hidden, because it has been marked as unsafe! You can see it because you are"," ",n&&n.unsafeMode?"in Unsafe Mode.":"the owner.")},r.a.createElement("div",{style:{position:"absolute",top:"5px",left:"6.5px",color:"red","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none","text-shadow":"0 0 1px black"},class:"fa"},"\uf056")):"",e.hidden||!e.to||!e.to.hidden&&!e.to.owner.hidden||l?"":r.a.createElement(b.a,{overlay:r.a.createElement(h.a,null,"This page this action leads to is hidden, because it has been marked as unsafe! You will be able to see it because you are",n&&n.unsafeMode?"in Unsafe Mode.":"the owner.")},r.a.createElement("div",{style:{position:"absolute",top:"5px",left:"6.5px",color:"red","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none","text-shadow":"0 0 1px black"},class:"fa"},"\uf056")),r.a.createElement(H.a,{variant:n&&n.unsafeMode?"secondary":"light",style:{position:"absolute",top:"0px",right:"0px"},size:"sm",drop:"right",title:r.a.createElement("span",{class:"fa"},"\uf013")},r.a.createElement(F.a.Item,{disabled:!n||n.screenName!==t.owner.screenName&&!n.isAdmin,onClick:function(){return a?(t=e.ID,void de("makeNonCanon",{choiceID:t},{ID:0},(function(){return setTimeout((function(){return window.location.reload(!1)}),100)}))):function(e){de("makeCanon",{choiceID:e},{ID:0},(function(){return setTimeout((function(){return window.location.reload(!1)}),100)}))}(e.ID);var t}},"Make ",a?"Nonc":"C","anon"),r.a.createElement(F.a.Item,{disabled:!n||n.screenName!==e.suggestedBy.screenName&&n.screenName!==t.owner.screenName&&!n.isAdmin,onClick:function(){return t=e.ID,void de("removeSuggestion",{choiceID:t},{},(function(){return window.location.reload(!1)}));var t}},"Delete"),r.a.createElement(F.a.Item,{onClick:function(){return y(r.a.createElement(z,{choice:e,loggedInAs:n,fromNode:t,close:function(){return y(void 0)}}))},disabled:!(n&&(n.isAdmin||a&&n.screenName===t.owner.screenName||!a&&n.screenName===e.suggestedBy.screenName))},"Edit"),r.a.createElement(F.a.Divider,null),r.a.createElement(F.a.Item,{onClick:function(){return t=e.ID,void de("createFeedback",Object(d.a)(Object(d.a)({},n?{accountScreenName:n.screenName}:{}),{},{info:"This is inappropriate",reportingObjectType:"Choice",reportingObjectID:t}),{info:0,reporting:0},(function(){alert("Successfully reported action!"),window.location.reload(!1)}));var t}},"Report")),r.a.createElement(B.a.Footer,n&&n.unsafeMode?{style:{backgroundColor:be[5]}}:{},r.a.createElement(b.a,{overlay:n?r.a.createElement("p",null):r.a.createElement(h.a,{id:"tooltip-disabled"},"You must be signed in!"),style:{width:"100%"}},r.a.createElement("span",null,r.a.createElement("a",{href:"/crowdventure/#/node/".concat(t.ID),style:{pointerEvents:n?"auto":"none",color:n?e.disliked?"red":n.unsafeMode?"white":"black":"grey"},className:"fa fa-thumbs-down",onClick:function(){return function(e){if(n){var t=s[e];t.disliked?(t.disliked=!1,t.score++):(t.disliked=!0,t.score--,t.liked&&t.score--),t.liked=!1,u([].concat(Object(R.a)(s.slice(0,e)),[t],Object(R.a)(s.slice(e+1,s.length)))),de("dislikeSuggestion",{accountScreenName:n.screenName,choiceID:t.ID},{ID:0},(function(){}))}}(c)}})))," "+(e.score||0)+" ",r.a.createElement(b.a,{overlay:n?r.a.createElement("p",null):r.a.createElement(h.a,{id:"tooltip-disabled"},"You must be signed in!"),style:{width:"100%"}},r.a.createElement("span",null,r.a.createElement("a",{href:"/crowdventure/#/node/".concat(t.ID),style:{pointerEvents:n?"auto":"none",color:n?e.liked?"green":n.unsafeMode?"white":"black":"grey"},className:"fa fa-thumbs-up",onClick:function(){return function(e){if(n){var t=s[e];t.liked?(t.liked=!1,t.score--):(t.liked=!0,t.score++,t.disliked&&t.score++),t.disliked=!1,u([].concat(Object(R.a)(s.slice(0,e)),[t],Object(R.a)(s.slice(e+1,s.length)))),de("likeSuggestion",{accountScreenName:n.screenName,choiceID:t.ID},{ID:0},(function(){}))}}(c)}}))),r.a.createElement("br",null),r.a.createElement("small",{className:"text-muted"},"Suggested By:"," ",r.a.createElement("a",{href:"/crowdventure/#/account/".concat(e.suggestedBy.screenName),style:{color:n&&n.unsafeMode?be[0]:be[2]}},r.a.createElement("img",{src:e.suggestedBy.profilePicURL?e.suggestedBy.profilePicURL:"/crowdventure/defaultProfilePic.jpg",onError:function(e){e.target.src="/crowdventure/defaultProfilePic.jpg"},style:{border:"1px solid #bbb",height:"2em",width:"2em","object-fit":"cover","border-radius":"50%"}})," ",e.suggestedBy.screenName))))})),E&&Object.keys(E).length>0?E:""):null:r.a.createElement(m.a,{variant:n&&n.unsafeMode?"dark":"light"},r.a.createElement("title",null,"Loading Page..."),r.a.createElement(m.a.Heading,null,"Loading..."))},q=function(e){var t=e.history,n=e.match,a=e.loggedInAs,c=Object(o.useState)(void 0),l=Object(i.a)(c,2),s=l[0],u=l[1],p=Object(o.useState)(void 0),y=Object(i.a)(p,2),v=y[0],w=y[1];return Object(o.useEffect)((function(){var e=fe(n.params.id);v&&e===v.ID||(void 0!==v&&(window.scrollTo({top:0,left:0,behavior:"smooth"}),setTimeout((function(){return w(void 0)}),500)),ue("getNode",{ID:e},{hidden:0,pictureURL:0,pictureUnsafe:0,fgColor:0,bgColor:0,ID:0,title:0,content:0,views:0,owner:{screenName:0,profilePicURL:0,hidden:0},canonChoices:{ID:0},nonCanonChoices:{ID:0}},(function(e){w(e||null)})))})),void 0===v?r.a.createElement(m.a,{variant:a&&a.unsafeMode?"dark":"light"},r.a.createElement("title",null,"Loading Page..."),r.a.createElement(m.a.Heading,null,"Loading Page...")):null===v?r.a.createElement(m.a,{variant:"danger"},r.a.createElement("title",null,"Error! Node: ",n.params.id),r.a.createElement(m.a.Heading,null,"Oh snap! You ran into an error"),r.a.createElement("p",null,"This page does not exist, or maybe our database is down. Who knows? Not you. Hahahaha")):!v.hidden||a&&(v.owner.screenName===a.screenName||a.unsafeMode)?!v.owner.hidden||a&&(v.owner.screenName===a.screenName||a.unsafeMode)?r.a.createElement(g.a,null,r.a.createElement("title",null,"Crowdventure! - ",v.title),r.a.createElement("meta",{property:"og:title",content:"Crowdventure! - ".concat(v.title)}),(v.hidden||v.owner.hidden)&&a&&v.owner.screenName===a.screenName&&!a.unsafeMode?r.a.createElement(m.a,{variant:"danger",dismissible:!0,onClose:function(){w(Object(d.a)(Object(d.a)({},v),{},{hidden:!1}))}},r.a.createElement(m.a.Heading,null,"Unsafe!"),r.a.createElement("p",null,"This page has been hidden from general users, because the content has been deemed unsafe. Users in unsafe mode can see this page and its content. Since you own this page, you can see it. If you believe this page should be considered safe, click ",r.a.createElement("a",{href:""},"Here"),".")):"",r.a.createElement("h1",{class:"display-4 text-center"},v.title),v.pictureURL?r.a.createElement(r.a.Fragment,null,r.a.createElement("meta",{property:"og:image",content:v.pictureURL}),r.a.createElement("img",{src:v.pictureURL,onLoad:function(e){e.target.style.display="block"},onError:function(e){e.target.style.display="none"},style:Object(d.a)({display:"block",marginLeft:"auto",marginRight:"auto",padding:"1px",border:"1px solid #eee","border-radius":"8px",width:"90%",maxHeight:"30vh","object-fit":"cover",cursor:"pointer"},v.pictureUnsafe?{"-webkit-filter":"blur(40px)",filter:"blur(40px)"}:{}),onClick:function(){return u(r.a.createElement(E,{loggedInAs:a,pictureURL:v.pictureURL,title:v.title,close:function(){return u(void 0)}}))}})):"",r.a.createElement("br",null),r.a.createElement(g.a,null,v.content.split("\n").map((function(e){return r.a.createElement("p",{style:{textIndent:"5%"}},e)}))),r.a.createElement("hr",a&&a.unsafeMode?{style:{backgroundColor:"rgb(225, 240, 255)"}}:{}),r.a.createElement(g.a,{className:"row",style:{paddingRight:"0px",paddingBottom:"5px"}},r.a.createElement("div",{class:"col"},r.a.createElement("h3",{class:"text-muted"},"Choices:")),r.a.createElement("div",{class:"col",style:{paddingRight:"0px"}},r.a.createElement(f.a,{onClick:function(){t.back()},size:"lg",className:"float-right",style:{border:"1px solid ".concat(be[2]),backgroundColor:be[0]},onMouseEnter:function(e){return e.target.style.backgroundColor=be[2]},onMouseLeave:function(e){return e.target.style.backgroundColor=be[0]}},"Go back!"))),v.canonChoices.length?r.a.createElement(Y,{node:v,loggedInAs:a,canon:!0}):r.a.createElement("p",{className:"text-muted"},"By decree of ",r.a.createElement("strong",null,v.owner.screenName),", this journey ends here."),r.a.createElement("hr",a&&a.unsafeMode?{style:{backgroundColor:"rgb(225, 240, 255)"}}:{}),r.a.createElement(g.a,{className:"row",style:{paddingRight:"0px"}},r.a.createElement("div",{class:"col align-bottom"},r.a.createElement("h3",{class:"align-bottom text-muted"},"Other options:")),r.a.createElement("div",{class:"col text-right",style:{paddingRight:"0px"}},r.a.createElement("small",{class:"text-muted"},"Author:"," ",r.a.createElement("a",{href:"/crowdventure/#/account/".concat(v.owner.screenName),style:{color:a&&a.unsafeMode?be[0]:be[2]}},r.a.createElement("img",{src:v.owner.profilePicURL?v.owner.profilePicURL:"/crowdventure/defaultProfilePic.jpg",onError:function(e){e.target.src="/crowdventure/defaultProfilePic.jpg"},style:{border:"1px solid #bbb",height:"2em",width:"2em","object-fit":"cover","border-radius":"50%"}})," ",v.owner.screenName," ")," ",r.a.createElement("br",null),"Views: ",v.views),a&&(v.owner.screenName===a.screenName||a.isAdmin)?r.a.createElement("p",null,r.a.createElement(f.a,{variant:"secondary",size:"sm",onClick:function(){u(r.a.createElement(A,{close:function(){return u(void 0)},node:v,loggedInAs:a}))}},"Edit Page")):"")),r.a.createElement("p",null),r.a.createElement(b.a,{overlay:a?r.a.createElement("p",null):r.a.createElement(h.a,{id:"tooltip-disabled"},"You must be signed in!"),style:{width:"100%"}},r.a.createElement("span",{className:"d-inline-block",style:{width:"100%"}},r.a.createElement(f.a,{onClick:function(){u(r.a.createElement(D,{loggedInAs:a,fromNode:v,close:function(){return u(void 0)}}))},disabled:!a,style:{width:"100%",pointerEvents:a?"auto":"none",border:"1px solid ".concat(be[2]),backgroundColor:be[0]},onMouseEnter:function(e){return e.target.style.backgroundColor=be[2]},onMouseLeave:function(e){return e.target.style.backgroundColor=be[0]}},"Suggest New Choice"))),r.a.createElement("p",null),v.nonCanonChoices.length?r.a.createElement(Y,{node:v,loggedInAs:a,canon:!1}):r.a.createElement("p",{className:"text-muted"},"There are currently no options! You can help expand the story by adding to it!"),r.a.createElement(g.a,null,r.a.createElement(f.a,{style:{marginRight:"0",marginLeft:"auto",display:"block"},variant:"danger",size:"sm",onClick:function(){de("createFeedback",Object(d.a)(Object(d.a)({},a?{accountScreenName:a.screenName}:{}),{},{info:"This is inappropriate",reportingObjectType:"Node",reportingObjectID:v.ID}),{info:0,reporting:0},(function(){alert("Successfully reported page!"),window.location.reload(!1)}))}},"Report Page")),s||""):r.a.createElement(m.a,{variant:"danger"},r.a.createElement("title",null,"Crowdventure! - ",v.title),r.a.createElement("meta",{property:"og:title",content:"Crowdventure! - ".concat(v.title)}),r.a.createElement(m.a.Heading,null,"Unsafe!"),r.a.createElement("p",null,"This page has been hidden from general users, because the author has been flagged as unsafe for the general public. If you would like to see it, log in and turn on ",r.a.createElement("b",null,"Unsafe mode"),"!")):r.a.createElement(m.a,{variant:"danger"},r.a.createElement("title",null,"Crowdventure! - ",v.title),r.a.createElement("meta",{property:"og:title",content:"Crowdventure! - ".concat(v.title)}),r.a.createElement(m.a.Heading,null,"Unsafe!"),r.a.createElement("p",null,"This page has been hidden from general users, because the content has been deemed unsafe. If you would like to see it, log in and turn on"," ",r.a.createElement("b",null,"Unsafe mode"),"!"))},V=n(15),W=function(e){var t=e.screenName,n=e.bio,a=e.profilePicture,c=e.close,l=e.account,s=e.setAccount,d=e.setRedirect,m=e.loggedInAs,g=Object(o.useState)(!0),b=Object(i.a)(g,2),h=b[0],E=b[1],v=Object(o.useState)(""),w=Object(i.a)(v,2),C=w[0],k=w[1],j=Object(o.useState)(void 0),O=Object(i.a)(j,2),x=O[0],N=O[1],M=Object(o.useState)(n||""),I=Object(i.a)(M,2),L=I[0],A=I[1],P=Object(o.useState)(a||""),U=Object(i.a)(P,2),D=U[0],R=U[1],T=Object(o.useState)(""),B=Object(i.a)(T,2),H=B[0],F=B[1],z=Object(o.useState)(""),Y=Object(i.a)(z,2),q=Y[0],W=Y[1],G=Object(o.useState)(""),_=Object(i.a)(G,2),K=_[0],J=_[1],$=Object(o.useState)(l.hidden),X=Object(i.a)($,2),Q=X[0],Z=X[1],ee=Object(o.useState)(l.isAdmin),te=Object(i.a)(ee,2),ne=te[0],ae=te[1],oe=function e(){var o=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(q&&q!==K)k(r.a.createElement("div",{style:{color:"red"}},"Passwords must match!"));else{var i=L.length>0?'""'.concat(fe(L,!0),'""'):null,m=D.length>0?fe(D):null,g={screenName:t};if(L!==n&&(g.bio=i),D!==a&&(g.profilePicURL=m),H!==t&&!H.match(/^\s*$/)){if(!o){var f=fe(H);return void ue("getAccount",{screenName:f},{screenName:0},(function(t){t?k(r.a.createElement("div",{style:{color:"red"}},"That account already exists!")):e(!0)}))}g.newScreenName=fe(H)}q&&(g.newPassword=fe(q)),void 0!==Q&&(g.hidden=Q),void 0!==ne&&(g.isAdmin=ne),de("editAccount",g,{bio:0,screenName:0,profilePicURL:0,totalNodeViews:0,totalSuggestionScore:0,hidden:0,isAdmin:0,featuredNodes:{owner:{screenName:0,profilePicURL:0},featured:0,hidden:0,ID:0,title:0,views:0,pictureURL:0,pictureUnsafe:0},nodes:{owner:{screenName:0,profilePicURL:0},featured:0,hidden:0,ID:0,title:0,content:0,views:0,pictureURL:0,pictureUnsafe:0}},(function(e){g.newScreenName&&(d(r.a.createElement(u.a,{to:"/account/".concat(g.newScreenName)})),(new V.a).set("account",g.newScreenName,{path:"/"}),window.location.reload(!1)),g.isAdmin!==l.isAdmin&&window.location.reload(!1),s(e),E(!1),c()}))}};return Object(o.useEffect)((function(){setTimeout((function(){W(""),F("")}),1e3)}),[]),r.a.createElement(p.a,{show:h,onHide:function(){E(!1),c()}},r.a.createElement(p.a.Header,Object.assign({},m&&m.unsafeMode?{style:{backgroundColor:be[5]}}:{},{closeButton:!0}),r.a.createElement(p.a.Title,null,"Editing Account")),r.a.createElement(y.a,null,r.a.createElement(p.a.Body,m&&m.unsafeMode?{style:{backgroundColor:be[4]}}:{},a?r.a.createElement("img",{src:a,alt:t+"'s Profile Pic",onError:function(e){e.target.style.display="none",k(r.a.createElement("span",{style:{color:"red"}},"Picture not found!"))},style:{opacity:a===D?1:.2,width:"100%","object-fit":"contain",padding:"1px",borderRadius:"8px"}}):"",r.a.createElement(y.a.Label,null,"Profile Pic URL:"),r.a.createElement(y.a.Control,Object.assign({value:D,onChange:function(e){return R(e.target.value)}},m&&m.unsafeMode?{style:{backgroundColor:be[5],color:"white"}}:{})),r.a.createElement(y.a.Label,null,"Bio:"),r.a.createElement(y.a.Control,Object.assign({as:"textarea",rows:"3",value:L,onChange:function(e){return A(e.target.value)}},m&&m.unsafeMode?{style:{backgroundColor:be[5],color:"white"}}:{})),r.a.createElement(y.a.Label,null,"Change your screen name:"),r.a.createElement(y.a.Control,Object.assign({placeholder:t,value:H,onChange:function(e){return F(e.target.value)}},m&&m.unsafeMode?{style:{backgroundColor:be[5],color:"white"}}:{})),r.a.createElement(y.a.Label,null,"Change your password:"),r.a.createElement(y.a.Control,Object.assign({type:"password",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",value:q,onChange:function(e){return W(e.target.value)}},m&&m.unsafeMode?{style:{backgroundColor:be[5],color:"white"}}:{})),q?r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a.Label,null,"Confirm password:"),r.a.createElement(y.a.Control,Object.assign({type:"password",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",value:K,onChange:function(e){return J(e.target.value)}},m&&m.unsafeMode?{style:{backgroundColor:be[5],color:"white"}}:{}))):"",m&&m.isAdmin?r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a.Label,null,"Admin Controls:"),r.a.createElement(y.a.Check,{type:"checkbox",checked:Q||!1,onChange:function(e){return Z(e.target.checked)},label:"Account should be hidden",id:"hide"}),r.a.createElement(y.a.Check,{type:"checkbox",checked:ne||!1,onChange:function(e){return ae(e.target.checked)},label:"Account is an admin",id:"adm"})):"",C||""),r.a.createElement(p.a.Footer,m&&m.unsafeMode?{style:{backgroundColor:be[5]}}:{},r.a.createElement(f.a,{onClick:function(){return oe()},style:{border:"1px solid ".concat(be[2]),backgroundColor:be[0]},onMouseEnter:function(e){return e.target.style.backgroundColor=be[2]},onMouseLeave:function(e){return e.target.style.backgroundColor=be[0]}},"Edit Account"),r.a.createElement(f.a,{onClick:function(){N(r.a.createElement(S,{loggedInAs:m,title:"Delete Account",content:"This will erase all content created by this account, including all pages and suggested choices, and liked and disliked content. Are you sure you wish to continue?",onConfirm:function(){return(new V.a).set("account","",{path:"/"}),void de("deleteAccount",{screenName:t},{},(function(){d(r.a.createElement(u.a,{to:"/"})),window.location.reload(!1)}))},close:function(){N(void 0)}}))},variant:"danger"},"Delete Account"))),x||"")},G=function(e){var t=e.account,n=e.close,a=e.loggedInAs,c=Object(o.useState)(""),l=Object(i.a)(c,2),s=l[0],u=l[1],d=Object(o.useState)(!0),m=Object(i.a)(d,2),g=m[0],b=m[1];return r.a.createElement(p.a,{show:g,onHide:function(){b(!1),n()}},r.a.createElement(p.a.Header,Object.assign({},a&&a.unsafeMode?{style:{backgroundColor:be[5]}}:{},{closeButton:!0}),r.a.createElement(p.a.Title,null,"Send message to ",t.screenName)),r.a.createElement(y.a,null,r.a.createElement(p.a.Body,a&&a.unsafeMode?{style:{backgroundColor:be[4]}}:{},r.a.createElement(y.a.Label,null,"Message:"),r.a.createElement(y.a.Control,Object.assign({value:s,onChange:function(e){return u(e.target.value)}},a&&a.unsafeMode?{style:{backgroundColor:be[5],color:"white"}}:{})))),r.a.createElement(p.a.Footer,a&&a.unsafeMode?{style:{backgroundColor:be[5]}}:{},r.a.createElement(f.a,{variant:"primary",onClick:function(){fe(s).length>0&&de("createNotification",{accountScreenName:t.screenName,content:"".concat(a.screenName," sent you a message: '").concat(fe(s),"'"),link:"/account/".concat(a.screenName)},{time:0},(function(e){e.err||(alert("Message sent!"),n())}))},style:{border:"1px solid ".concat(be[2]),backgroundColor:be[0]},onMouseEnter:function(e){return e.target.style.backgroundColor=be[2]},onMouseLeave:function(e){return e.target.style.backgroundColor=be[0]}},"Send!")))},_=function(e){var t=e.nodes,n=e.loggedInAs,a=Object(o.useState)(void 0),c=Object(i.a)(a,2),l=c[0],s=c[1],u=[];return t?r.a.createElement(T.a,{style:{marginTop:"5px",marginBottom:"5px"}},r.a.createElement(g.a,null),t.filter((function(e){return n&&(n.unsafeMode||n.screenName===e.owner.screenName)||!e.hidden})).map((function(e,t){return u.push(Object(o.createRef)()),r.a.createElement(B.a,{className:"mt-2",style:Object(d.a)({boxShadow:"0 0 3px ".concat(be[0]),overflow:"hidden"},n&&n.unsafeMode?{backgroundColor:be[4]}:{}),ref:u[t]},r.a.createElement("a",{href:"/crowdventure/#/node/".concat(e.ID),style:{color:n&&n.unsafeMode?be[0]:be[2]},onMouseEnter:function(e){u[t].current.style.boxShadow="0 0 6px ".concat(be[2])},onMouseLeave:function(e){u[t].current.style.boxShadow="0 0 3px ".concat(be[0])}},e.pictureURL?r.a.createElement(B.a.Header,{style:{backgroundColor:n&&n.unsafeMode?be[5]:"white",padding:"1px"}},r.a.createElement(B.a.Img,{src:e.pictureURL,style:Object(d.a)({"max-height":"30vh","object-fit":"cover"},e.pictureUnsafe?{"-webkit-filter":"blur(20px)",filter:"blur(20px)"}:{}),onError:function(e){e.target.parentNode.style.display="none"}})):"",r.a.createElement(B.a.Body,{className:"text-center",style:{paddingTop:"2em"}},r.a.createElement(B.a.Title,null,e.title))),e.featured&&e&&e.owner?r.a.createElement(b.a,{overlay:r.a.createElement(h.a,null,"This page has been starred by ",e.owner.screenName,"!")},r.a.createElement("div",{style:{position:"absolute",top:"5px",left:"5px",color:"yellow","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none","text-shadow":"0 0 1px black"},class:"fa"},"\uf005")):"",e.hidden?r.a.createElement(b.a,{overlay:r.a.createElement(h.a,null,"This page is hidden, because it has been marked as unsafe! You can see it because you are"," ",n&&n.unsafeMode?"in Unsafe Mode.":"the owner.")},r.a.createElement("div",{style:{position:"absolute",top:(e.featured?"2":"")+"5px",left:"6.5px",color:"red","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none","text-shadow":"0 0 1px black"},class:"fa"},"\uf056")):"",r.a.createElement(H.a,{variant:n&&n.unsafeMode?"secondary":"light",style:{position:"absolute",top:"0px",right:"0px"},size:"sm",drop:"right",title:r.a.createElement("span",{class:"fa"},"\uf013")},n&&void 0!==e.featured?r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a.Item,{onClick:function(){return function(e,t){de("editNode",{nodeID:e.ID,featured:!t},{title:0},(function(){return window.location.reload(!1)}))}(e,e.featured)},disabled:n.screenName!==e.owner.screenName},e.featured?"Un-f":"F","eature page"),r.a.createElement(F.a.Item,{onClick:function(){return s(r.a.createElement(S,{loggedInAs:n,close:function(){return s(void 0)},onConfirm:function(){return function(e){de("deleteNode",{nodeID:e.ID},0,(function(){window.location.reload(!1)}))}(e)},title:"Delete Page",content:"This will erase all suggested choices of this page, and their associated scores. This will NOT delete sub-pages of this page. Are you sure you wish to continue?"}))},disabled:n.screenName!==e.owner.screenName},"Delete"),r.a.createElement(F.a.Item,{disabled:!0},"Make Private"),r.a.createElement(F.a.Divider,null)):"",r.a.createElement(F.a.Item,{onClick:function(){return t=e.ID,void de("createFeedback",Object(d.a)(Object(d.a)({},n?{accountScreenName:n.screenName}:{}),{},{info:"This is inappropriate",reportingObjectType:"Node",reportingObjectID:t}),{info:0,reporting:0},(function(){alert("Successfully reported page!"),window.location.reload(!1)}));var t}},"Report"),n&&n.isAdmin?r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a.Divider,null),r.a.createElement(F.a.Item,{onClick:function(){return function(e){de("editNode",{nodeID:e.ID,hidden:!e.hidden},{title:0},(function(){return window.location.reload(!1)}))}(e)}},e.hidden?"Un-h":"H","ide page")):""),r.a.createElement(B.a.Footer,Object.assign({className:"text-muted text-center"},n&&n.unsafeMode?{style:{backgroundColor:be[5]}}:{}),r.a.createElement("small",null,"Author:"," ",r.a.createElement("a",{href:"/crowdventure/#/account/".concat(e.owner.screenName),style:{color:n&&n.unsafeMode?be[0]:be[2]}},r.a.createElement("img",{src:e.owner.profilePicURL?e.owner.profilePicURL:"/crowdventure/defaultProfilePic.jpg",alt:e.owner.screenName+" Profile Pic",onError:function(e){e.target.src="/crowdventure/defaultProfilePic.jpg"},style:{border:"1px solid #bbb",height:"2em",width:"2em","object-fit":"cover","border-radius":"50%"}})," ",e.owner.screenName),r.a.createElement("br",null),"Views:"," "+e.views)))})),l||""):r.a.createElement(m.a,{variant:n&&n.unsafeMode?"dark":"light"},r.a.createElement(m.a.Heading,null,"Loading Page..."))},K=function(e){var t=e.loggedInAs,n=(e.setLoggedInAs,e.match),a=Object(o.useState)(void 0),c=Object(i.a)(a,2),l=c[0],s=c[1],b=Object(o.useState)(void 0),h=Object(i.a)(b,2),p=h[0],v=h[1],w=Object(o.useState)(void 0),C=Object(i.a)(w,2),k=C[0],j=C[1],O=Object(o.useState)(""),x=Object(i.a)(O,2),N=x[0],M=x[1],I=Object(o.useState)([]),L=Object(i.a)(I,2),S=L[0],A=L[1];return Object(o.useEffect)((function(){var e=fe(n.params.id);p&&e===p.screenName||ue("getAccount",{screenName:e},{bio:0,screenName:0,profilePicURL:0,totalNodeViews:0,totalSuggestionScore:0,hidden:0,isAdmin:0,featuredNodes:{owner:{screenName:0,profilePicURL:0},featured:0,hidden:0,ID:0,title:0,views:0,pictureURL:0,pictureUnsafe:0},nodes:{owner:{screenName:0,profilePicURL:0},featured:0,hidden:0,ID:0,title:0,content:0,views:0,pictureURL:0,pictureUnsafe:0}},(function(e){v(e),M(""),A([])}))})),void 0===p?r.a.createElement(m.a,{variant:t&&t.unsafeMode?"dark":"light"},r.a.createElement("title",null,"Loading Account..."),r.a.createElement(m.a.Heading,null,"Loading Account...")):null===p?r.a.createElement(m.a,{variant:"danger"},r.a.createElement("title",null,"Error! Account: ",n.params.id),r.a.createElement(m.a.Heading,null,"Oh snap! You ran into an error"),r.a.createElement("p",null,"This page does not exist, or maybe our database is down. Who knows? Not you. Hahahaha")):!p.hidden||t&&(p.screenName===t.screenName||t.unsafeMode)?r.a.createElement(g.a,null,r.a.createElement("title",null,p.screenName," on Crowdventure!"),r.a.createElement("meta",{property:"og:title",content:"".concat(p.screenName," on Crowdventure!")}),p.hidden&&t&&p.screenName===t.screenName&&!t.unsafeMode?r.a.createElement(m.a,{variant:"danger",dismissible:!0,onClose:function(){v(Object(d.a)(Object(d.a)({},node),{},{hidden:!1}))}},r.a.createElement(m.a.Heading,null,"Unsafe!"),r.a.createElement("p",null,"This page has been hidden from general users, because the content has been deemed unsafe. Users in unsafe mode can see this page and its content. Since you own this page, you can see it. If you believe this page should be considered safe, click ",r.a.createElement("a",{href:""},"Here"),".")):"",r.a.createElement("h1",null,r.a.createElement("meta",{property:"og:image",content:p.profilePicURL?p.profilePicURL:"/crowdventure/defaultProfilePic.jpg"}),r.a.createElement("img",{src:p.profilePicURL?p.profilePicURL:"/crowdventure/defaultProfilePic.jpg",alt:p.screenName+" Profile Pic",onError:function(e){e.target.src="/crowdventure/defaultProfilePic.jpg"},style:{border:"1px solid #bbb",height:"3em",width:"3em","object-fit":"cover","border-radius":"50%","margin-right":"5px",cursor:"pointer"},onClick:function(){j(r.a.createElement(E,{loggedInAs:t,title:p.screenName,pictureURL:p.profilePicURL?p.profilePicURL:"/crowdventure/defaultProfilePic.jpg",close:function(){return j(void 0)}}))}})," ",r.a.createElement("span",{className:"display-4 align-middle"},p.screenName)),p.bio||t&&t.screenName===p.screenName?r.a.createElement(g.a,null,p.bio?p.bio.split("\n").map((function(e){return r.a.createElement("p",{style:{textIndent:"5%"}},e)})):""):"",r.a.createElement(g.a,null,t&&(t.screenName===p.screenName||t.isAdmin)?r.a.createElement(f.a,{variant:"secondary",onClick:function(){j(r.a.createElement(W,{account:p,loggedInAs:t,screenName:p.screenName,bio:p.bio,profilePicture:p.profilePicURL,setAccount:v,setRedirect:s,close:function(){return j(void 0)}}))},size:"sm"},"Edit Account"):""," ",t&&t.screenName===p.screenName?r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{size:"sm",onClick:function(){(new V.a).set("account","",{path:"/"}),(new V.a).set("unsafeMode","false",{path:"/"}),window.location.reload(!1)},variant:"secondary"},"Log out")," ",r.a.createElement(f.a,{size:"sm",onClick:function(){s(r.a.createElement(u.a,{to:"/notifications"}))},style:{border:"1px solid ".concat(be[2]),backgroundColor:be[0]},onMouseEnter:function(e){return e.target.style.backgroundColor=be[2]},onMouseLeave:function(e){return e.target.style.backgroundColor=be[0]}},"Notifications"," ",t.notifications&&t.notifications.filter((function(e){return!e.seen})).length?r.a.createElement("span",{style:{color:"red"}},"(",t.notifications.filter((function(e){return!e.seen})).length," ","New)"):"")):t?r.a.createElement(f.a,{size:"sm",onClick:function(){j(r.a.createElement(G,{account:p,loggedInAs:t,close:function(){return j(void 0)}}))},style:{border:"1px solid ".concat(be[2]),backgroundColor:be[0]},onMouseEnter:function(e){return e.target.style.backgroundColor=be[2]},onMouseLeave:function(e){return e.target.style.backgroundColor=be[0]}},"Send Message"):"",r.a.createElement("div",{style:{float:"right"},class:"text-muted"},"Total views: ",p.totalNodeViews," Total score:"," ",p.totalSuggestionScore)),r.a.createElement("br",null),t&&t.screenName===p.screenName?r.a.createElement(f.a,{onClick:function(){j(r.a.createElement(U,{close:function(){return j(void 0)},loggedInAs:t,featured:!0,callback:function(e){return s(r.a.createElement(u.a,{to:"/node/".concat(e.ID)}))}}))},style:{width:"100%",border:"1px solid ".concat(be[2]),backgroundColor:be[0]},onMouseEnter:function(e){return e.target.style.backgroundColor=be[2]},onMouseLeave:function(e){return e.target.style.backgroundColor=be[0]}},"Create a New Adventure!"):"",r.a.createElement("hr",t&&t.unsafeMode?{style:{backgroundColor:"rgb(225, 240, 255)"}}:{}),r.a.createElement("h3",null,"Featured Stories:"),r.a.createElement(_,{nodes:p.featuredNodes,loggedInAs:t}),r.a.createElement("hr",t&&t.unsafeMode?{style:{backgroundColor:"rgb(225, 240, 255)"}}:{}),r.a.createElement("h3",null,"Search All Pages Authored by ",p.screenName,":"),r.a.createElement(y.a,null,r.a.createElement(y.a.Control,Object.assign({},t&&t.unsafeMode?{style:{backgroundColor:be[5],color:"white"}}:{},{value:N,placeholder:"Search for a page...",onChange:function(e){M(e.target.value),e.target.value.length>=2?A([].concat(Object(R.a)(p.nodes.filter((function(t){return t.title.toLowerCase().includes(e.target.value.toLowerCase())}))),Object(R.a)(p.nodes.filter((function(t){return!t.title.toLowerCase().includes(e.target.value.toLowerCase())&&t.content.toLowerCase().includes(e.target.value.toLowerCase())}))))):A([])}}))),N?r.a.createElement(_,{nodes:S,loggedInAs:t}):"",r.a.createElement("p",null),r.a.createElement(g.a,null,r.a.createElement(f.a,{style:{marginRight:"0",marginLeft:"auto",display:"block"},variant:"danger",size:"sm",onClick:function(){p&&de("createFeedback",Object(d.a)(Object(d.a)({},t?{accountScreenName:t.screenName}:{}),{},{info:"This is inappropriate",reportingObjectType:"Account",reportingObjectID:p.screenName}),{info:0,reporting:0},(function(){alert("Successfully reported account!"),window.location.reload(!1)}))}},"Report Account")),k||"",l||""):r.a.createElement(m.a,{variant:"danger"},r.a.createElement("title",null,p.screenName," on Crowdventure!"),r.a.createElement("meta",{property:"og:title",content:"".concat(p.screenName," on Crowdventure!")}),r.a.createElement(m.a.Heading,null,"Unsafe!"),r.a.createElement("p",null,"This page has been hidden from general users, because the content has been deemed unsafe. If you would like to see it, log in and turn on"," ",r.a.createElement("b",null,"Unsafe mode"),"!"))},J=void 0,$=0,X=function(e){var t=e.loggedInAs,n=(e.history,Object(o.useState)(void 0)),a=Object(i.a)(n,2),c=a[0],l=a[1],s=Object(o.useState)(void 0),d=Object(i.a)(s,2),m=d[0],p=d[1],E=Object(o.useState)(void 0),y=Object(i.a)(E,2),v=y[0],w=y[1],C=Object(o.useState)(void 0),k=Object(i.a)(C,2),j=k[0],O=k[1],x=function(){ue("recentlyUpdatedNodes",{pageNum:$,allowHidden:t&&t.unsafeMode||"true"===(new V.a).get("unsafeMode")||!1},{hidden:0,ID:0,title:0,owner:{screenName:0,profilePicURL:0},views:0,size:0,pictureURL:0,pictureUnsafe:0},(function(e){return p(e)}))};return Object(o.useEffect)((function(){var e=t&&t.unsafeMode||"true"===(new V.a).get("unsafeMode")||!1;c||ue("featuredNodes",{allowHidden:t&&t.unsafeMode||"true"===(new V.a).get("unsafeMode")||!1},{hidden:0,ID:0,title:0,owner:{screenName:0,profilePicURL:0},views:0,size:0,pictureURL:0,pictureUnsafe:0},(function(e){return l(e)})),m||x(),J!==e&&(void 0!==J&&(l(void 0),p(void 0)),J=e)})),r.a.createElement(g.a,null,r.a.createElement("title",null,"Crowdventure!"),r.a.createElement(b.a,{overlay:t?r.a.createElement("p",null):r.a.createElement(h.a,{id:"tooltip-disabled"},"You must be signed in!"),style:{width:"100%"}},r.a.createElement("span",{className:"d-inline-block",style:{width:"100%"}},r.a.createElement(f.a,{onClick:function(){w(r.a.createElement(U,{featured:!0,loggedInAs:t,close:function(){return w(void 0)},callback:function(e){return O(r.a.createElement(u.a,{to:"/node/".concat(e.ID)}))}}))},disabled:!t,style:{width:"100%",pointerEvents:t?"auto":"none",border:"1px solid ".concat(be[2]),backgroundColor:be[0]},onMouseEnter:function(e){return e.target.style.backgroundColor=be[2]},onMouseLeave:function(e){return e.target.style.backgroundColor=be[0]}},"Create a New Adventure!"))),r.a.createElement("p",null),r.a.createElement("hr",t&&t.unsafeMode?{style:{backgroundColor:"rgb(225, 240, 255)"}}:{}),r.a.createElement("h3",null,"Featured Stories:"),r.a.createElement(_,{nodes:c,loggedInAs:t}),r.a.createElement("hr",t&&t.unsafeMode?{style:{backgroundColor:"rgb(225, 240, 255)"}}:{}),r.a.createElement("h3",null,"Recently added or updated:"),r.a.createElement(_,{nodes:m,loggedInAs:t}),r.a.createElement("div",{style:{marginBottom:"3.5em"}},r.a.createElement(f.a,{className:"float-right",onClick:function(){$++,x()},style:{border:"1px solid ".concat(be[2]),backgroundColor:be[0]},onMouseEnter:function(e){return e.target.style.backgroundColor=be[2]},onMouseLeave:function(e){return e.target.style.backgroundColor=be[0]}},"Next >")),r.a.createElement("hr",t&&t.unsafeMode?{style:{backgroundColor:"rgb(225, 240, 255)"}}:{}),r.a.createElement("span",{className:"d-inline-block",style:{width:"100%"}},r.a.createElement(f.a,{onClick:function(){ue("randomNode",{allowHidden:t&&t.unsafeMode},{ID:0},(function(e){O(r.a.createElement(u.a,{to:"/node/".concat(e.ID)}))}))},style:{width:"100%",pointerEvents:t?"auto":"none",border:"1px solid ".concat(be[2]),backgroundColor:be[0]},onMouseEnter:function(e){return e.target.style.backgroundColor=be[2]},onMouseLeave:function(e){return e.target.style.backgroundColor=be[0]}},"Play a random adventure!")),v||"",j||"")},Q=function(e){var t=e.loggedInAs,n=e.setLoggedInAs,a=Object(o.useState)(void 0),c=Object(i.a)(a,2),l=c[0],s=c[1],g=Object(o.useState)(void 0),b=Object(i.a)(g,2),h=b[0],p=b[1],E=[],y=[],v=Object(o.createRef)(),w=new V.a;if(!t&&0===w.get("account").length)return r.a.createElement(u.a,{to:"/"});if(Object(o.useEffect)((function(){l||ue("getAccount",{screenName:t?t.screenName:w.get("account")},{screenName:0,notifications:{time:0,seen:0,content:0,link:0}},(function(e){s(e),t&&(t.notifications=e.notifications,n(Object(d.a)({},t)))}))})),!l||!t)return r.a.createElement(m.a,{variant:t&&t.unsafeMode?"dark":"light"},r.a.createElement(m.a.Heading,null,"Loading Page..."));var C=l.notifications?l.notifications.filter((function(e){return!e.seen})):[];return r.a.createElement("div",{style:{marginBottom:"3em"}},r.a.createElement("title",null,"Notifications for ",t.screenName),r.a.createElement("span",{ref:v},"You have ",C.length," new notification",1!==C.length?"s":"",C.length?"!":"."),r.a.createElement("p",null),l.notifications?l.notifications.map((function(e,a){return E.push(Object(o.createRef)()),y.push(Object(o.createRef)()),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{ref:E[a],style:{width:"100%",position:"relative",backgroundColor:t.unsafeMode?be[4]:"white",height:"4em",borderRadius:"1em",boxShadow:"0 0 3px ".concat(be[0]),padding:"1em",cursor:"pointer","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"},onMouseOver:function(e){E[a].current.style.boxShadow="0 0 6px ".concat(be[2])},onMouseOut:function(e){E[a].current.style.boxShadow="0 0 3px ".concat(be[0])},onClick:function(o){o.target!==y[a].current&&"fa fa-times"!==o.target.className&&(e.seen=!0,de("seeNotification",{accountScreenName:l.screenName,index:a,force:!0},{},(function(a){s(Object(d.a)({},l)),t.notifications=l.notifications,n(Object(d.a)({},t)),e.link&&p(r.a.createElement(u.a,{to:e.link}))})))}},r.a.createElement("div",{style:{width:"1.25em",height:"1.25em",position:"absolute",left:"0.16em",top:"0.16em",fontSize:"2.5em",lineHeight:"calc(50% + 0.8em)",backgroundColor:e.seen?"lightgrey":be[0],color:e.seen?"grey":"white",borderRadius:"50%",textAlign:"center"},onMouseOver:function(t){y[a].current.style.backgroundColor=e.seen?"silver":be[2]},onMouseOut:function(t){y[a].current.style.backgroundColor=e.seen?"lightgrey":be[0]},onMouseDown:function(t){y[a].current.style.backgroundColor=e.seen?"darkgray":be[6]},onMouseUp:function(t){y[a].current.style.backgroundColor=e.seen?"silver":be[2]},onClick:function(o){o.target===y[a].current&&(e.seen=!e.seen,de("seeNotification",{accountScreenName:l.screenName,index:a},{},(function(e){s(Object(d.a)({},l)),t.notifications=l.notifications,n(Object(d.a)({},t))})))},ref:y[a],class:"fa fa-exclamation"})," ",r.a.createElement("div",{style:{width:"calc(100% - 4em)",position:"absolute",left:"4em",lineHeight:"calc(50% + 1em)"}},r.a.createElement("span",{style:{position:"absolute",top:"-0.25em"}},e.content),r.a.createElement("span",{class:"text-muted",style:{position:"absolute",top:"1.5em",fontSize:"0.75em"}},new Date(e.time).toLocaleString())),r.a.createElement("span",{class:"fa fa-times",style:{position:"absolute",top:"1.5em",right:"1.5em",color:"#888",cursor:"pointer",textShadow:"-1px 0 2px white, 0 1px 2px white, 1px 0 2px white, 0 -1px 2px white"},onMouseEnter:function(e){return e.target.style.color="#555"},onMouseLeave:function(e){return e.target.style.color="#888"},onClick:function(){de("removeNotification",{accountScreenName:l.screenName,index:a},{},(function(e){var o=l.notifications.filter((function(e,t){return t!==a}));s(Object(d.a)(Object(d.a)({},l),{},{notifications:o})),t.notifications=o,n(Object(d.a)({},t))}))}})),r.a.createElement("p",null))})):"",r.a.createElement(f.a,{className:"float-right",onClick:function(){p(r.a.createElement(u.a,{to:"/account/".concat(l.screenName)}))},style:{border:"1px solid ".concat(be[2]),backgroundColor:be[0]},onMouseEnter:function(e){return e.target.style.backgroundColor=be[2]},onMouseLeave:function(e){return e.target.style.backgroundColor=be[0]}},"Back to account >"),h||"")},Z=n(140),ee=n(97),te=n.n(ee),ne=function(e){var t=e.loggedInAs,n=e.setLoggedInAs,a=e.close,c=Object(o.useState)(!0),l=Object(i.a)(c,2),s=l[0],u=l[1],d=Object(o.useState)(""),m=Object(i.a)(d,2),g=m[0],b=m[1],h=Object(o.useState)(""),E=Object(i.a)(h,2),v=E[0],w=E[1],C=Object(o.useState)(""),k=Object(i.a)(C,2),j=k[0],O=k[1];return r.a.createElement(p.a,{show:s,onHide:function(){u(!1),a()}},r.a.createElement(p.a.Header,Object.assign({},t&&t.unsafeMode?{style:{backgroundColor:be[5]}}:{},{closeButton:!0}),r.a.createElement(p.a.Title,null,"Log in")),r.a.createElement(y.a,null,r.a.createElement(p.a.Body,t&&t.unsafeMode?{style:{backgroundColor:be[4]}}:{},r.a.createElement(y.a.Label,null,"Screen Name:"),r.a.createElement(y.a.Control,Object.assign({},t&&t.unsafeMode?{style:{backgroundColor:be[5],color:"white"}}:{},{value:v,onChange:function(e){return w(e.target.value)}})),r.a.createElement(y.a.Label,null,"Password:"),r.a.createElement(y.a.Control,Object.assign({},t&&t.unsafeMode?{style:{backgroundColor:be[5],color:"white"}}:{},{type:"password",value:j,onChange:function(e){return O(e.target.value)}})),g||""),r.a.createElement(p.a.Footer,t&&t.unsafeMode?{style:{backgroundColor:be[5]}}:{},r.a.createElement(f.a,{variant:"primary",style:{border:"1px solid ".concat(be[2]),backgroundColor:be[0]},onMouseEnter:function(e){return e.target.style.backgroundColor=be[2]},onMouseLeave:function(e){return e.target.style.backgroundColor=be[0]},onClick:function(){return v?j?function(){var e=fe(v),t=fe(j);de("loginAccount",{screenName:e,password:t},{screenName:0,profilePicURL:0,isAdmin:0,notifications:{seen:0}},(function(e){e?((new V.a).set("account",v,{path:"/"}),n(e),u(!1),a()):b(r.a.createElement("div",{style:{color:"red"}},"That account does not exist or the password did not match!"))}))}():b(r.a.createElement("span",{style:{color:"red"}},"Please enter your screenName!")):b(r.a.createElement("span",{style:{color:"red"}},"Please enter your password!"))}},"Log in"))))},ae=function(e){var t=e.loggedInAs,n=e.setLoggedInAs,a=e.close,c=Object(o.useState)(!0),l=Object(i.a)(c,2),s=l[0],u=l[1],d=Object(o.useState)(""),m=Object(i.a)(d,2),g=m[0],b=m[1],h=Object(o.useState)(""),E=Object(i.a)(h,2),v=E[0],w=E[1],C=Object(o.useState)(""),k=Object(i.a)(C,2),j=k[0],O=k[1],x=Object(o.useState)(""),N=Object(i.a)(x,2),M=N[0],I=N[1],L=function(){var e=escape(v),t=escape(j);de("createAccount",{screenName:e,password:t},{screenName:0,profilePicURL:0,isAdmin:0,notifications:{seen:0}},(function(e){e&&((new V.a).set("account",v,{path:"/"}),n(e),u(!1),a())}))};return r.a.createElement(p.a,{show:s,onHide:function(){u(!1),a()}},r.a.createElement(p.a.Header,Object.assign({},t&&t.unsafeMode?{style:{backgroundColor:be[5]}}:{},{closeButton:!0}),r.a.createElement(p.a.Title,null,"Sign Up for Crowdventure!")),r.a.createElement(y.a,null,r.a.createElement(p.a.Body,t&&t.unsafeMode?{style:{backgroundColor:be[4]}}:{},r.a.createElement(y.a.Group,null,r.a.createElement(y.a.Label,null,"Screen Name:"),r.a.createElement(y.a.Control,{value:v,onChange:function(e){return w(e.target.value)}}),r.a.createElement(y.a.Label,null,"Create Password:"),r.a.createElement(y.a.Control,Object.assign({},t&&t.unsafeMode?{style:{backgroundColor:be[5],color:"white"}}:{},{type:"password",value:j,onChange:function(e){return O(e.target.value)}})),r.a.createElement(y.a.Label,null,"Confirm Password:"),r.a.createElement(y.a.Control,Object.assign({},t&&t.unsafeMode?{style:{backgroundColor:be[5],color:"white"}}:{},{type:"password",value:M,onChange:function(e){return I(e.target.value)}}))),g||""),r.a.createElement(p.a.Footer,t&&t.unsafeMode?{style:{backgroundColor:be[5]}}:{},r.a.createElement(f.a,{variant:"primary",style:{border:"1px solid ".concat(be[2]),backgroundColor:be[0]},onMouseEnter:function(e){return e.target.style.backgroundColor=be[2]},onMouseLeave:function(e){return e.target.style.backgroundColor=be[0]},onClick:function(){return v?j?function(){if(j!==M)b(r.a.createElement("div",{style:{color:"red"}},"Passwords must match!"));else{var e=escape(v);ue("getAccount",{screenName:e},{screenName:0},(function(e){e?b(r.a.createElement("div",{style:{color:"red"}},"That account already exists!")):L()}))}}():b(r.a.createElement("span",{style:{color:"red"}},"Please enter a screen name!")):b(r.a.createElement("span",{style:{color:"red"}},"Please enter a password!"))}},"Sign Up"))))},oe=function(e){var t=e.onConfirm,n=e.close,a=e.loggedInAs,c=Object(o.useState)(!0),l=Object(i.a)(c,2),s=l[0],u=l[1],d=Object(o.useState)(!1),m=Object(i.a)(d,2),g=m[0],b=m[1];return r.a.createElement(p.a,{show:s,onHide:function(){u(!1),n()}},r.a.createElement(p.a.Header,Object.assign({},a&&a.unsafeMode?{style:{backgroundColor:be[5]}}:{},{closeButton:!0}),r.a.createElement(p.a.Title,null,"Turn on Unsafe Mode")),r.a.createElement(p.a.Body,a&&a.unsafeMode?{style:{backgroundColor:be[4]}}:{},"Unsafe Mode allows you to see ",r.a.createElement("b",null,"ALL"),' of the content on Crowdventure, including content that has been classified as "unsafe". Before you can continue, you must acknowledge and agree to the terms of service:',r.a.createElement("p",null),r.a.createElement(y.a,null,r.a.createElement(y.a.Control,{disabled:!0,as:"textarea",rows:"5",value:'Please read these terms of service ("terms", "terms of service") carefully before using the Crowdventure website (the "service").\n            \nI. Conditions of Use\n  We will provide their services to you, which are subject to the conditions stated below in this document. Every time you visit this website, use its services or make a purchase, you accept the following conditions. This is why we urge you to read them carefully.\n            \nII. Privacy Policy\n  Before you continue using our website we advise you to read our privacy policy [link to privacy policy] regarding our user data collection. It will help you better understand our practices.\n            \nIII. Copyright\n  Content published on this website (digital downloads, images, texts, graphics, logos) is the property of Crowdventure and/or its content creators and protected by international copyright laws. The entire compilation of the content found on this website is the exclusive property of [name], with copyright authorship for this compilation by [name].\n            \nIV. Communication\n  The entire communication with us is electronic. Every time you send us an email or visit our website, you are going to be communicating with us. You hereby consent to receive communications from us. If you subscribe to the news on our website, you are going to receive regular emails from us. We will continue to communicate with you by posting news and notices on our website and by sending you emails. You also agree that all notices, disclosures, agreements and other communications we provide to you electronically meet the legal requirements that such communications be in writing.\n            \nV. Applicable Law\n  By visiting this website, you agree that the laws of the United States of America, without regard to principles of conflict laws, will govern these terms of service, or any dispute of any sort that might come between [name] and you, or its business partners and associates.\n            \nVI. Disputes\n  Any dispute related in any way to your visit to this website or to products you purchase from us shall be arbitrated by state or federal court [your location] and you consent to exclusive jurisdiction and venue of such courts.\n            \nVII. Comments, Reviews, and Emails\n  Visitors may post content as long as it is not obscene, illegal, defamatory, threatening, infringing of intellectual property rights, invasive of privacy or injurious in any other way to third parties. Content has to be free of software viruses, political campaign, and commercial solicitation.\n  We reserve all rights (but not the obligation) to remove and/or edit such content. When you post your content, you grant Crowdventure non-exclusive, royalty-free and irrevocable right to use, reproduce, publish, modify such content throughout the world in any media.\n            \nVIII. License and Site Access\n  We grant you a limited license to access and make personal use of this website. You are not allowed to download or modify it. This may be done only with written consent from us.\n            \nIX. User Account\n  If you are an owner of an account on this website, you are solely responsible for maintaining the confidentiality of your private user details (username and password). You are responsible for all activities that occur under your account or password.\n  We reserve all rights to terminate accounts, edit or remove content and cancel orders in their sole discretion.'}),r.a.createElement(y.a.Check,{style:{float:"right"},type:"checkbox",label:"I agree to the terms of service.",checked:g,id:"check",onChange:function(e){b(e.target.checked)}}))),r.a.createElement(p.a.Footer,a&&a.unsafeMode?{style:{backgroundColor:be[5]}}:{},r.a.createElement(f.a,{variant:"primary",onClick:t,disabled:!g,style:{border:"1px solid ".concat(be[2]),backgroundColor:be[0]},onMouseEnter:function(e){return e.target.style.backgroundColor=be[2]},onMouseLeave:function(e){return e.target.style.backgroundColor=be[0]}},"Turn on Unsafe Mode")))},re=function(e){var t=e.loggedInAs,n=e.setLoggedInAs,a=Object(o.useState)(void 0),c=Object(i.a)(a,2),l=c[0],s=c[1];if(void 0===t||null===t)return r.a.createElement(Z.a.Text,{style:{"text-align":"right"}},"You are not logged in."," ",r.a.createElement("a",{onClick:function(){s(r.a.createElement(ne,{loggedInAs:t,setLoggedInAs:n,close:function(){return s(void 0)}}))},style:{cursor:"pointer"},onMouseEnter:function(e){return e.target.style.textDecoration="underline"},onMouseLeave:function(e){return e.target.style.textDecoration="none"}},"Log In")," ","or"," ",r.a.createElement("a",{onClick:function(){s(r.a.createElement(ae,{loggedInAs:t,setLoggedInAs:n,close:function(){return s(void 0)}}))},style:{cursor:"pointer"},onMouseEnter:function(e){return e.target.style.textDecoration="underline"},onMouseLeave:function(e){return e.target.style.textDecoration="none"}},"Sign Up"),l||"");var u=Object(o.createRef)();return r.a.createElement(Z.a.Text,null,r.a.createElement("a",{href:"/crowdventure/#/account/".concat(t.screenName),style:{color:t&&t.unsafeMode?"white":"",fontSize:"1.5em"},onMouseOver:function(e){u.current.style.textDecoration="underline"},onMouseOut:function(e){u.current.style.textDecoration="none"}},r.a.createElement("div",{style:{position:"relative"}},r.a.createElement("span",{ref:u,style:{position:"absolute",top:"0.25em",right:"3.25em"}},t.screenName),r.a.createElement("img",{src:t.profilePicURL?t.profilePicURL:"/crowdventure/defaultProfilePic.jpg",onError:function(e){e.target.src="/crowdventure/defaultProfilePic.jpg"},style:{position:"absolute",right:"1em",border:"1px solid #bbb",height:"2em",width:"2em","object-fit":"cover","border-radius":"50%"}}),t.notifications&&t.notifications.filter((function(e){return!e.seen})).length>0?r.a.createElement("div",{style:{position:"absolute",right:"1.5em",top:"-0.5em",borderRadius:"1em",backgroundColor:"red",width:"2em",height:"2em",lineHeight:"2em",fontSize:"0.5em",color:"white"}},t.notifications.filter((function(e){return!e.seen})).length):r.a.createElement(r.a.Fragment,null))),r.a.createElement("br",null),r.a.createElement("p",null),r.a.createElement("span",{class:"small text-muted"},"Unsafe Mode:"," ",r.a.createElement(te.a,{checked:t.unsafeMode,onstyle:"secondary",size:"sm",onChange:function(e){e?s(r.a.createElement(oe,{close:function(){return s(void 0)},loggedInAs:t,onConfirm:function(){(new V.a).set("unsafeMode",!0,{path:"/"}),n(Object(d.a)(Object(d.a)({},t),{},{unsafeMode:!0})),s(void 0)}})):((new V.a).set("unsafeMode",!1,{path:"/"}),n(Object(d.a)(Object(d.a)({},t),{},{unsafeMode:!1})))}}),r.a.createElement(b.a,{overlay:r.a.createElement(h.a,{id:"tooltip-unsafe"},"Unsafe mode allows you to see all content on Crowdventure, including content that has been flagged as unsafe for the general public!"),placement:"bottom"},r.a.createElement(f.a,{style:{backgroundColor:"#00000000",borderColor:"#00000000",borderRadius:"50%",color:t.unsafeMode?"white":"black"},size:"xs"},r.a.createElement("span",{className:"fa fa-info-circle"})))),l||"")},ce=n(81),le=n(123),ie=function(){var e=Object(o.useState)(void 0),t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(o.useEffect)((function(){if(void 0===n){var e=new V.a,t=escape(e.get("account"));t&&""!==t||e.set("unsafeMode","false",{path:"/"}),de("loginAccount",{screenName:t},{screenName:0,profilePicURL:0,isAdmin:0,notifications:{seen:0}},(function(t){t?(t.unsafeMode="true"===e.get("unsafeMode"),a(t)):(e.set("account","",{path:"/"}),e.set("unsafeMode","false",{path:"/"}))}))}n&&n.unsafeMode?(document.getElementById("root").style.backgroundImage="linear-gradient(\n      to right,\n      rgb(158, 232, 255),\n      ".concat(be[3]," 10%,\n      ").concat(be[3]," 90%,\n      rgb(158, 232, 255)\n    )"),document.getElementById("root").style.color="rgb(225, 240, 255)"):(document.getElementById("root").style.backgroundImage="linear-gradient(\n        to right,\n        rgb(158, 232, 255),\n        rgb(245,250,255) 10%,\n        rgb(245,250,255) 90%,\n        rgb(158, 232, 255)\n      )",document.getElementById("root").style.color="")})),r.a.createElement(g.a,null,r.a.createElement(Z.a,{expand:"lg",className:"row border-bottom"},r.a.createElement(Z.a.Brand,{href:"/",style:{maxWidth:"60%"}},r.a.createElement("img",{href:"/",src:"/crowdventure/logo.png",alt:"Crowdventure Logo",style:{width:"100%"}})),r.a.createElement(Z.a.Toggle,{"aria-controls":"basic-navbar-nav",className:"bg-light",style:{marginRight:"20px"}}),r.a.createElement(Z.a.Collapse,{id:"basic-navbar-nav",className:"justify-content-end"},r.a.createElement("div",{class:"text-center"},r.a.createElement(re,{loggedInAs:n,setLoggedInAs:a})))),r.a.createElement("br",null),r.a.createElement(s.a,null,r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/",render:function(e){return r.a.createElement(X,Object.assign({},e,{loggedInAs:n,history:ce.a}))},exact:!0}),r.a.createElement(u.b,{path:"/node/:id",render:function(e){return r.a.createElement(q,Object.assign({},e,{loggedInAs:n,history:ce.a}))}}),r.a.createElement(u.b,{path:"/account/:id",render:function(e){return r.a.createElement(K,Object.assign({},e,{loggedInAs:n,setLoggedInAs:a}))}}),r.a.createElement(u.b,{path:"/notifications",render:function(e){return r.a.createElement(Q,Object.assign({},e,{loggedInAs:n,setLoggedInAs:a}))}}))),r.a.createElement("br",null),r.a.createElement(Z.a,{className:"row border-top"},r.a.createElement("div",{class:"col"},r.a.createElement("small",{class:"text-muted"},"@ 2020 Copyright: (MIT) Benjamin Kern")),r.a.createElement("div",{class:"col text-right",style:{paddingRight:"20px"}},r.a.createElement("a",{href:"https://github.com/benjaminjkern/crowdventure/blob/master/CHANGELOG.md"},r.a.createElement("small",{class:"text-muted"},"Version: ",le.version)))),r.a.createElement("title",null,"Crowdventure! - Page not found!"))},se=(0,n(126).createApolloFetch)({uri:n(86).backendURL}),ue=function(e,t,n,a){console.log("query{".concat(e).concat(me(t)).concat(ge(n),"}")),se({query:"query{".concat(e).concat(me(t)).concat(ge(n),"}")}).then((function(t,n){n&&alert(n),t.data?a(t.data[e]):alert("Something went wrong when calling query")}))},de=function(e,t,n,a,o){console.log("mutation{".concat(e).concat(me(t)).concat(ge(n),"}")),se({query:"mutation{".concat(e).concat(me(t)).concat(ge(n),"}")}).then((function(t,n){n&&alert(n),t.data?a(t.data[e]):alert("Something went wrong when calling mutation")}))},me=function(e){return Object.keys(e).length>0?"(".concat(Object.keys(e).map((function(t){return"".concat(t,":").concat("string"===typeof e[t]?'"':"").concat(e[t]).concat("string"===typeof e[t]?'"':"")})).join(","),")"):""},ge=function e(t){return Object.keys(t).length>0?"{".concat(Object.keys(t).map((function(n){return n+e(t[n])})).join(","),"}"):""},fe=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?t?e.replace(/"$/,' " ').replace(/^"/,' " ').replace(/"""/g,' "" " '):e.replace(/\n/g,"").replace(/\\/g,"\\\\").replace(/"/g,'\\"'):e},be=["rgb(100, 180, 244)","rgb(158, 232, 255)","rgb(80, 160, 224)","rgb(34,34,34)","rgb(41,41,41)","rgb(50,50,50)","rgb(80, 150, 200)"];l.a.render(r.a.createElement(ie,null),document.getElementById("root"))},86:function(e,t){e.exports={backendURL:"https://3yfp7ejc0m.execute-api.us-east-1.amazonaws.com/dev/graphql",BING_API_KEY:"8300cebe5f0d452a9ccb4bca67af4659"}}},[[125,1,2]]]);
//# sourceMappingURL=main.0b44d230.chunk.js.map